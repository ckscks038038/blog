<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>39. Combination Sum  | Lutein 40g</title>
<meta name="keywords" content="tree, BFS, backtracking">
<meta name="description" content="前言： 這題的決策樹(decision tree)比較比較特別，左邊代表繼續選原本的，右邊代表啥都不選，就給你空著。只要把這個概念想清楚，這題也就迎刃而解了。
題目： Given an array of distinct integers candidates and a target integer target, return a list of all unique combinations of candidates where the chosen numbers sum to target. You may return the combinations in any order.
The same number may be chosen from candidates an unlimited number of times. Two combinations are unique if the frequency of at least one of the chosen numbers is different.">
<meta name="author" content="Yang">
<link rel="canonical" href="http://localhost:1313/blog/post/leetcode_39/">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css" integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://localhost:1313/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/blog/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/blog/post/leetcode_39/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/blog/" accesskey="h" title="Lutein 40g (Alt + H)">Lutein 40g</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/blog/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blog/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blog/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      39. Combination Sum 
    </h1>
    <div class="post-meta">May 19, 2023 . Yang

</div>
  </header> 
  <div class="post-content"><h2 id="前言">前言：<a hidden class="anchor" aria-hidden="true" href="#前言">#</a></h2>
<p>這題的決策樹(decision tree)比較比較特別，左邊代表繼續選原本的，右邊代表啥都不選，就給你空著。只要把這個概念想清楚，這題也就迎刃而解了。</p>
<hr>
<h2 id="題目">題目：<a hidden class="anchor" aria-hidden="true" href="#題目">#</a></h2>
<p>Given an array of <strong>distinct</strong> integers candidates and a target integer target, return a list of all <strong>unique combinations</strong> of candidates where the chosen numbers sum to target. You may return the combinations in <strong>any order</strong>.</p>
<p>The <strong>same</strong> number may be chosen from candidates an <strong>unlimited number of times</strong>. Two combinations are unique if the <strong>frequency</strong> of at least one of the chosen numbers is different.</p>
<p>The test cases are generated such that the number of unique combinations that sum up to <code>target</code> is less than 150 combinations for the given input.</p>
<p>給定一個整數<code>target</code>，找出<code>list</code>中可以組合成target的不重複組合，且組合中的數字可以重複出現。</p>
<pre tabindex="0"><code>* Example 1:
Input: candidates = [2,3,6,7], target = 7
Output: [[2,2,3],[7]]
Explanation:
2 and 3 are candidates, and 2 + 2 + 3 = 7. Note that 2 can be used multiple times.
7 is a candidate, and 7 = 7.
These are the only two combinations.

* Example 2:
Input: candidates = [2,3,5], target = 8
Output: [[2,2,2,2],[2,3,3],[3,5]]

* Example 3:
Input: candidates = [2], target = 1
Output: []
</code></pre><hr>
<h2 id="解題思路">解題思路：<a hidden class="anchor" aria-hidden="true" href="#解題思路">#</a></h2>
<p>直接上核心的code比較快:</p>
<pre tabindex="0"><code>// decide to include nums[i]
cur.append(nums[i])
dfs(i, cur, total + nums[i])

// decide not to include nums[i]
cur.pop()
dfs(i+1, cur, total) 
</code></pre><p><code>cur</code>代表目前決策走到現在，放入了什麼數字。同前提所提到的，可以假設<strong>走左邊表示放入當前數字，走右邊表示選擇不放入</strong>，且放入數字後，<strong>下一次也繼續對同樣的數字做一樣的考慮</strong>。也就是說，如果當<code>i=0</code>得到<code>nums[0]=2</code>，那選擇走左邊就是把一個數字<code>2</code>放入<code>cur</code>中，並且保持<code>i=0</code>，下一次就會對相同數字做決策。</p>
<p>這樣做就可以達成題目所要求，可以重複數字的條件。</p>
<p>既然左邊選擇不更新<code>i</code>，在子節點上對同數字做決策，那麼選擇右邊就是不選擇放入<code>nums[i]</code>，並且直接跳過<code>i=0</code>的可能，去考慮<code>i+1</code>情況的決策。</p>
<p>一開始心中有個疑問:</p>
<p><strong>那既加入<code>nums[0]=2</code>又不保持<code>i=0</code>，更新i+=1，使下一次對<code>i=1</code>的數值做決策的情況去哪了呢？</strong></p>
<p>其實就在第一次選擇左邊後(<code>i=0</code>, 此時<code>cur=[nums[0]]</code>)，第二次選擇往右走(<code>i=0</code>,此時<code>cur=[nums[0]]</code>)，第三次選擇往左(<code>i=1</code>,此時<code>cur=[nums[0], nums[1]]</code>)的情況。</p>
<p>講起來有點複雜，拿出紙筆畫圖就會理解了</p>
<h3 id="1-base-case">1. Base case<a hidden class="anchor" aria-hidden="true" href="#1-base-case">#</a></h3>
<p>如果可以找到跟<code>target</code>相等的組合，當然立馬加入<code>res</code>中</p>
<p>如果決策樹已經走到底，也就是<code>index i &gt;= len(nums)</code>，或是者是當前組合的總數已經超越目標值<code>target</code>了，那就直接return跳出stack即可</p>
<pre tabindex="0"><code>if total == target:
	res.append(cur.copy())
	return
if i &gt;= len(nums) or total &gt; target:
	return
</code></pre><h3 id="2-total這個變數">2. total這個變數<a hidden class="anchor" aria-hidden="true" href="#2-total這個變數">#</a></h3>
<p>因為total會隨著當前組合改變，所以如果使用全域變數的話，理論上pop()的時候還需要再減掉之前append的數值，不如就直接當成argument來傳遞。一樣的道理也適用於另外兩個變數<code>i</code>, <code>cur</code></p>
<hr>
<h1 id="程式碼">程式碼：<a hidden class="anchor" aria-hidden="true" href="#程式碼">#</a></h1>
<pre tabindex="0"><code>class Solution:
    def combinationSum(self, nums: List[int], target: int) -&gt; List[List[int]]:
        res = []

        def dfs(i, cur, total):
            if total == target:
                res.append(cur.copy())
                return
            if i &gt;= len(nums) or total &gt; target:
                return
            
            # decide to include nums[i]
            cur.append(nums[i])
            dfs(i, cur, total + nums[i])

            # decide not to include nums[i]
            cur.pop()
            dfs(i+1, cur, total) 

        dfs(0, [], 0)
        return res
</code></pre>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/blog/tags/tree/">Tree</a></li>
      <li><a href="http://localhost:1313/blog/tags/bfs/">BFS</a></li>
      <li><a href="http://localhost:1313/blog/tags/backtracking/">Backtracking</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="http://localhost:1313/blog/">Lutein 40g</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
